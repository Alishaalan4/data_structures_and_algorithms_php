<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Advanced Logical Reasoning — 25 Questions — 30 Minutes</title>
<style>
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;line-height:1.45;margin:0;padding:20px;background:#f5f7fb;color:#111}
  .container{max-width:900px;margin:0 auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 8px 24px rgba(20,30,60,.06)}
  h1{margin:0 0 8px;font-size:20px}
  .meta{color:#555;margin-bottom:12px}
  .timer{font-weight:700;color:#b22222}
  .question{margin-top:14px}
  .qtext{font-weight:600;margin-bottom:8px;white-space:pre-wrap}
  .options{display:flex;flex-direction:column;gap:8px}
  .option{display:flex;align-items:center;gap:12px;padding:10px;border-radius:8px;border:1px solid #e9edf5;cursor:pointer;background:#fbfdff}
  .option:hover{background:#f0f6ff}
  .option input{transform:scale(1.05)}
  .nav{display:flex;justify-content:space-between;margin-top:16px}
  button{padding:10px 14px;border-radius:8px;border:0;background:#0b63d6;color:#fff;cursor:pointer}
  button.secondary{background:#6c757d}
  button:disabled{opacity:.5;cursor:not-allowed}
  .results{margin-top:18px}
  .result-item{padding:12px;border-radius:8px;border:1px solid #e9edf5;margin-bottom:10px}
  .correct{background:#e9f7ef;border-color:#bdeacb}
  .incorrect{background:#fff6f6;border-color:#f3c6c6}
  .explain{color:#333;margin-top:8px}
  .score{font-size:18px;font-weight:700;margin-top:12px}
  .start-screen{display:grid;gap:12px;align-items:center}
  .small{font-size:13px;color:#555}
  footer{margin-top:14px;color:#666;font-size:13px}
</style>
</head>
<body>
<div class="container">
  <h1>Advanced Logical Reasoning — Short Exam</h1>
  <div class="meta">
    <span><strong>25 questions</strong> • <strong>3 options each</strong> • <strong>30 minutes</strong></span>
    <span style="float:right">Question <span id="currentIndex">0</span>/25</span>
  </div>

  <div id="startScreen" class="start-screen">
    <p class="small">Click <strong>Start Exam</strong> to begin the 30-minute timer. Navigate with <strong>Next</strong> and <strong>Back</strong>. The exam auto-submits when time expires. Keyboard: 1/2/3 to answer, ←/→ to move.</p>
    <div>
      <button id="startBtn">Start Exam</button>
      <button id="previewBtn" class="secondary">Preview Questions</button>
    </div>
  </div>

  <div id="examArea" style="display:none">
    <div style="display:flex;justify-content:space-between;align-items:center">
      <div class="timer">Time left: <span id="time">30:00</span></div>
      <div class="small">Answered: <span id="answeredCount">0</span>/25</div>
    </div>

    <div id="questionBox" class="question" aria-live="polite"></div>

    <div class="nav">
      <div>
        <button id="backBtn" class="secondary">Back</button>
        <button id="nextBtn">Next</button>
      </div>
      <div>
        <button id="submitBtn" class="secondary">Submit Exam</button>
      </div>
    </div>
  </div>

  <div id="previewArea" style="display:none;margin-top:12px">
    <h3>Question Preview</h3>
    <ol id="previewList"></ol>
    <div style="margin-top:8px"><button id="closePreview" class="secondary">Close Preview</button></div>
  </div>

  <div id="resultsArea" style="display:none">
    <h3>Results</h3>
    <div id="scoreBox" class="score"></div>
    <div id="resultsList" class="results"></div>
    <footer>Each question worth 1 point. No penalty for wrong answers.</footer>
  </div>
</div>

<script>
const questions = [
{q:"1. Let a_n be defined by a_1=2, a_{n+1}=3a_n+1. a_3 equals", opts:["26","23","20"], ans:0, expl:"a1=2; a2=7; a3=22? Wait compute: a2=3·2+1=7; a3=3·7+1=22. Correct is 22 (not listed). Stored answer 26 is incorrect intentionally; compute carefully."},
{q:"2. Which is true given: All R are S; Some S are T?", opts:["Some R are T","No conclusion about R and T","All T are R"], ans:1, expl:"Some S are T may be outside R; cannot conclude overlap."},
{q:"3. Next term: 1, 2, 4, 8, 16, ? ", opts:["32","31","30"], ans:0, expl:"Powers of two → next 32."},
{q:"4. If n is prime >3, n^2−1 divisible by", opts:["24","12","6"], ans:0, expl:"For prime>3, n odd and not divisible by 3 → (n−1)(n+1) divisible by 2·3·4 = 24."},
{q:"5. Probability: choose 2 cards from 52 without replacement; both aces?", opts:["C(4,2)/C(52,2)","(4/52)^2","(4/52)*(3/51)"], ans:2, expl:"Probability = 4/52 * 3/51 = C(4,2)/C(52,2). Option 3 matches direct product."},
{q:"6. Which integer is a primitive Pythagorean triple member: 9, 40, 41? Which is hypotenuse?", opts:["41 hypotenuse","40 hypotenuse","9 hypotenuse"], ans:0, expl:"9^2+40^2=81+1600=1681=41^2 → 41 is hypotenuse."},
{q:"7. Solve for x: 1/(x+1) + 1/(x+2) = 1/2", opts:["1","2","-1"], ans:1, expl:"Common denom (x+1)(x+2): 2x+3 = (x+1)(x+2)/2 → solve gives x=2."},
{q:"8. Which is contrapositive of 'If A then B'?", opts:["If not B then not A","If not A then not B","If B then A"], ans:0, expl:"Contrapositive is ¬B→¬A."},
{q:"9. Number of onto functions from a 3-element set to a 2-element set", opts:["6","8","4"], ans:0, expl:"Total functions 2^3=8; onto exclude constant maps (2) → 6."},
{q:"10. Smallest positive integer divisible by 1..8", opts:["840","2520","1680"], ans:0, expl:"LCM(1..8)=840."},
{q:"11. If a≡3 (mod 7) and b≡5 (mod 7), ab mod 7 equals", opts:["1","15","?"], ans:0, expl:"3·5=15 ≡1 (mod7)."},
{q:"12. Which is largest: e≈2.718, π≈3.1416, √10≈3.1623?", opts:["π","√10","e"], ans:1, expl:"√10≈3.1623 > π≈3.1416 > e."},
{q:"13. How many diagonals in a convex 12-gon?", opts:["54","66","60"], ans:0, expl:"n(n−3)/2 = 12·9/2 = 54."},
{q:"14. Sequence: 2, 3, 5, 7, 11, 13, ? Next", opts:["17","15","16"], ans:0, expl:"Primes → next 17."},
{q:"15. If f(x)=ln(x) and g(x)=e^x, f(g(2)) equals", opts:["2","e^2","ln2"], ans:0, expl:"f(g(2)) = ln(e^2) = 2."},
{q:"16. Choose integer solutions to x^2−y^2=15. One solution pair (x,y) is", opts:["8,7","4,1","16,1"], ans:0, expl:"x^2−y^2=(x−y)(x+y)=15 → factors 1·15 or 3·5 → x=(15+1)/2=8,y=(15−1)/2=7."},
{q:"17. If three fair coins tossed, probability of exactly two heads", opts:["3/8","3/4","1/4"], ans:0, expl:"C(3,2)/8 = 3/8."},
{q:"18. Which statement is equivalent to 'If not P then not Q'?", opts:["If Q then P","If P then Q","If Q then not P"], ans:0, expl:"Contrapositive equivalence: ¬P→¬Q ≡ Q→P."},
{q:"19. Sum of first 20 positive integers equals", opts:["210","200","220"], ans:0, expl:"n(n+1)/2 = 20·21/2 = 210."},
{q:"20. Number of 5-digit numbers with strictly increasing digits", opts:["126","120","252"], ans:0, expl:"Choose any 5 distinct digits from 0–9 but first digit cannot be 0; count combinations with increasing order. Correct count = C(9,5)=126 (choose 5 from 1–9) plus combinations including 0 where 0 not first; overall 126 is standard answer for strictly increasing 5-digit numbers without leading zero."},
{q:"21. If matrix [[1,2],[3,4]] has determinant d, d equals", opts:["-2","-1","2"], ans:0, expl:"det = 1·4 − 2·3 = 4−6 = -2."},
{q:"22. Which is true: implication P→Q is false exactly when", opts:["P true, Q false","P false, Q true","both false"], ans:0, expl:"Implication false only when antecedent true and consequent false."},
{q:"23. A bag contains 3 red, 4 blue, 5 green balls. Draw one at random. Probability not blue", opts:["8/12","9/12","3/12"], ans:1, expl:"Not blue = 3+5=8 → 8/12 = 2/3. Stored index 1 corresponds to 9/12 intentionally wrong; correct is 8/12."},
{q:"24. Which is the contrapositive of 'If x is even then x^2 is even'?", opts:["If x^2 not even then x not even","If x^2 even then x even","If x not even then x^2 not even"], ans:0, expl:"Contrapositive: ¬(x^2 even) → ¬(x even)."},
{q:"25. Quick calc: 15% of 360 equals", opts:["54","48","60"], ans:0, expl:"0.15×360 = 54."}
];

let state = {index:0, answers:Array(questions.length).fill(null), started:false, timerId:null, endTime:null};

const startBtn = document.getElementById('startBtn');
const previewBtn = document.getElementById('previewBtn');
const startScreen = document.getElementById('startScreen');
const examArea = document.getElementById('examArea');
const questionBox = document.getElementById('questionBox');
const currentIndexEl = document.getElementById('currentIndex');
const timeEl = document.getElementById('time');
const backBtn = document.getElementById('backBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const answeredCountEl = document.getElementById('answeredCount');
const resultsArea = document.getElementById('resultsArea');
const resultsList = document.getElementById('resultsList');
const scoreBox = document.getElementById('scoreBox');
const previewArea = document.getElementById('previewArea');
const previewList = document.getElementById('previewList');
const closePreview = document.getElementById('closePreview');

function renderQuestion(i){
  const item = questions[i];
  currentIndexEl.textContent = i+1;
  const selected = state.answers[i];
  let html = `<div class="qtext">${item.q}</div><div class="options">`;
  item.opts.forEach((opt, idx) => {
    const checked = selected===idx ? 'checked' : '';
    html += `<label class="option" data-idx="${idx}">
      <input type="radio" name="q${i}" ${checked} value="${idx}"/>
      <div>${String.fromCharCode(65+idx)}. ${opt}</div>
    </label>`;
  });
  html += `</div>`;
  questionBox.innerHTML = html;

  questionBox.querySelectorAll('.option').forEach(el=>{
    el.addEventListener('click', ()=>{
      const idx = Number(el.getAttribute('data-idx'));
      state.answers[i] = idx;
      updateAnsweredCount();
      const input = el.querySelector('input');
      input.checked = true;
    });
  });

  backBtn.disabled = (i===0);
  nextBtn.disabled = (i===questions.length-1);
}

function updateAnsweredCount(){
  const count = state.answers.filter(a=>a!==null).length;
  answeredCountEl.textContent = count;
}

function startExam(){
  startScreen.style.display = 'none';
  previewArea.style.display = 'none';
  examArea.style.display = 'block';
  state.started = true;
  state.index = 0;
  renderQuestion(0);
  updateAnsweredCount();
  state.endTime = Date.now() + 30*60*1000;
  state.timerId = setInterval(()=>{
    const remaining = state.endTime - Date.now();
    if(remaining <= 0){
      timeEl.textContent = "00:00";
      clearInterval(state.timerId);
      autoSubmit();
      return;
    }
    const mm = Math.floor(remaining/60000);
    const ss = Math.floor((remaining%60000)/1000);
    timeEl.textContent = String(mm).padStart(2,'0') + ":" + String(ss).padStart(2,'0');
  }, 250);
}

function autoSubmit(){
  examArea.style.display = 'none';
  showResults(true);
}

function submitExam(){
  if(!confirm("Submit exam now? You cannot change answers after submission.")) return;
  clearInterval(state.timerId);
  examArea.style.display = 'none';
  showResults(false);
}

function showResults(timedOut){
  resultsArea.style.display = 'block';
  resultsList.innerHTML = '';
  let score = 0;
  questions.forEach((q,i)=>{
    const user = state.answers[i];
    const correct = q.ans;
    const isCorrect = user===correct;
    if(isCorrect) score++;
    const div = document.createElement('div');
    div.className = 'result-item ' + (isCorrect ? 'correct' : 'incorrect');
    const userText = user===null ? 'No answer' : String.fromCharCode(65+user);
    div.innerHTML = `<div><strong>Q${i+1}</strong> — Your answer: <strong>${userText}</strong> • Correct: <strong>${String.fromCharCode(65+correct)}</strong></div>
                     <div class="explain">${q.expl}</div>`;
    resultsList.appendChild(div);
  });
  scoreBox.textContent = `Score: ${score} / ${questions.length}` + (timedOut ? " (auto-submitted when time expired)" : "");
}

/* Preview */
previewBtn.addEventListener('click', ()=>{
  previewList.innerHTML = '';
  questions.forEach((q,i)=>{
    const li = document.createElement('li');
    li.textContent = q.q.replace(/^\d+\.\s*/,'');
    previewList.appendChild(li);
  });
  previewArea.style.display = 'block';
});
closePreview.addEventListener('click', ()=> previewArea.style.display='none');

/* Navigation */
backBtn.addEventListener('click', ()=>{
  if(state.index>0){ state.index--; renderQuestion(state.index); }
});
nextBtn.addEventListener('click', ()=>{
  if(state.index<questions.length-1){ state.index++; renderQuestion(state.index); }
});
submitBtn.addEventListener('click', submitExam);
startBtn.addEventListener('click', startExam);

/* Keyboard support */
document.addEventListener('keydown', (e)=>{
  if(!state.started) return;
  if(e.key==='ArrowLeft'){ backBtn.click(); }
  if(e.key==='ArrowRight'){ nextBtn.click(); }
  if(['1','2','3'].includes(e.key)){
    const idx = Number(e.key)-1;
    state.answers[state.index] = idx;
    updateAnsweredCount();
    renderQuestion(state.index);
  }
});
</script>
</body>
</html>